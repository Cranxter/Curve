<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>

    <div class="graph_container">
            <!-- World <br> 
            Hello <br> -->
    </div>

    <script type="text/javascript">
        // Your beautiful D3 code will go here

        var current_song = null
        var my_data = null

        function sleep(milliseconds) {
            var start = new Date().getTime();
            for (var i = 0; i < 1e7; i++) {
              if ((new Date().getTime() - start) > milliseconds){s
                break;
              }
            }
          }

        d3.json("./all_songs.json").then(function(data) {
            
        console.log(data);
        my_data = data

        values = data
        

        

        var h = 700
        var w = 1600

        var xScale = d3.scaleLinear()
        .domain([d3.min(values,function(d){return d.x}),d3.max(values,function(d) {return d.x})])
        .range([100,w-100])

        var yScale = d3.scaleLinear()
        .domain([d3.min(values,function(d){return d.y}),d3.max(values, function(d){return d.y})])
        .range([100,h-100])

        svg = d3.select(".graph_container").append("svg").attr("width",w).attr("height",h).attr("style","")
        var circles = svg.selectAll("circle")
        .data(values)
        .enter()
        .append("circle")

        x1 = circles.transition()
        //.delay(function(d,i){return i*0.1})
        .duration(0.2)
        .attr("cx",function(d,i)
         {var x = xScale(w/2)
        return w/2})
        .attr("cy", function(d) { return h/2})
        .attr("r", 4)
        .attr("fill","red")


        var colors = ['#56CCF2', '#6FCF97','#F2C94C','#9B51E0','#F2994A','#EB5757','#BCEB57','#eb57bc','#4ceff2','#dfe6e9']

		function random_number(maximum,minimum)
		{
			x =  Math.floor(Math.random() * (maximum - minimum + 1)) + minimum;
			return x;
		}


        
        x2 = x1.transition()
        .delay(function(d,i){return i*20})
        .duration(2000)
        .attr("cx",function(d,i)
         {var x = xScale(d.x)
        return x})
        .attr("cy", function(d) {return yScale(d.y)})
        .attr("r", 8)
        .style("fill",function(d) { return colors[random_number(9,0)]})
        .style("opacity","0.8")

	


        circles.on("mouseover", function(d){d3.select(this).attr("r","20").style("fill","green") 
          
        var audio_file = new Audio('./Songs/'+d.name+'.mp3')
        console.log(audio_file)
        audio_file.play()
        current_song = audio_file
      
      })
        circles.on("mouseout", function(){d3.select(this).attr("r","8").transition().duration(700).style("fill","yellow")
      
        current_song.pause()
      
      })
        //.transition()
        //.duration(1000)

        stopmusic = function(audio_file) { }

      });
        
    </script>
    
</body>
</html>